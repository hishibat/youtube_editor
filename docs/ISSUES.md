# YouTube Shorts Editor - 今後の改善課題

## Issue #1: 背景除去精度の向上
**優先度: 高**

### 概要
SAM 2 (Segment Anything Model 2) による背景除去の精度向上が必要。

### 現状の問題
- ギター演奏動画において、人物+ギターの切り抜き精度が不十分
- 椅子などの背景オブジェクトが前景として誤検出される
- ギターの指板が背景として誤認識され透過してしまう

### 実装済みの対策
- SAM 2 ポイント指定型追跡
- Hough変換によるギター指板保護
- オプティカルフローによる振動検知
- 座標ベースの強制排除（右側30%）

### 今後の改善案
- [ ] SAM 2のプロンプトポイント最適化
- [ ] ビデオ予測器（VideoPredictor）の活用による時間的一貫性向上
- [ ] ユーザーによる手動ポイント指定機能
- [ ] 複数モデルのアンサンブル
- [ ] Fine-tuningによるギター演奏動画特化モデルの検討

### 関連ファイル
- `backend/services/sam2_video_matting.py`
- `backend/services/video_matting.py`

---

## Issue #2: テロップ追加機能
**優先度: 中**

### 概要
動画にテロップ（字幕・キャプション）を追加する機能を実装する。

### 機能要件
- [ ] テキスト入力UI
- [ ] フォント選択（日本語対応）
- [ ] 文字サイズ・色・位置の調整
- [ ] 表示タイミング（開始・終了時間）の設定
- [ ] アニメーション効果（フェードイン/アウト、スライドなど）
- [ ] プリセットスタイル（YouTube Shorts向け）

### 技術的検討
- OpenCV `cv2.putText()` または PIL/Pillow
- FFmpeg字幕フィルター
- フロントエンドでのリアルタイムプレビュー

### UI/UX
- タイムライン上でテロップ区間を視覚的に編集
- ドラッグ&ドロップで位置調整
- テンプレートから選択可能

---

## Issue #3: ハイライト自動検出＆イントロフック生成
**優先度: 中**

### 概要
動画全体から最も盛り上がるパート（ハイライト）を自動検出し、冒頭2-3秒のフック（イントロ）として配置する機能。

### ユースケース
YouTube Shortsでは冒頭数秒で視聴者の興味を引くことが重要。ギター演奏動画の場合、最も印象的なソロパートを冒頭に持ってくることで視聴継続率を向上させる。

### 機能要件
- [ ] 音声解析によるハイライト検出
  - 音量のピーク検出
  - テンポ・リズムの変化検出
  - 音の複雑さ（ギターソロの技巧的な部分）
- [ ] 映像解析によるハイライト検出
  - 動きの激しさ
  - 表情の変化（オプション）
- [ ] ハイライト区間の自動抽出（2-3秒）
- [ ] 冒頭への自動配置
- [ ] トランジション効果（フラッシュ、ズームなど）

### 出力構成
```
[ハイライト 2-3秒] → [トランジション] → [本編]
```

### 技術的検討
- librosa / pydub による音声解析
- OpenCV による映像解析
- FFmpeg によるクリップ結合
- 機械学習モデルによるハイライトスコアリング

### 参考
- YouTube Shorts のトレンド分析
- TikTok の人気動画構成パターン
